{% extends "layouts/admin/base.html" %}

{% block pageTitle %}
  Payment overview MVP
{% endblock %}

{% block content %}
<br>

  <div class="jui-width-container">
    <main role="main" class="govuk-main-wrapper">

      <div class="govuk-grid-row">
        <div class="govuk-grid-column-one-half">

          <h1 class="govuk-heading-xl">Payment overview</h1>

        </div>
      </div>

              <div class="govuk-grid-row">
                <div class="govuk-grid-column-payment-one-quarter">


                  <h2 class="govuk-heading-l">Account</h2>

                  <span class="govuk-caption-m">£20,000.00 limit</span>
                  <h3 class="govuk-heading-m">PBA0241163<br>
                   <span class="govuk-caption-m" style="color: #000;">Credit account
                   </span>
                     </h3>

                     <span class="govuk-caption-m">Available balance</span>
                     <h3 class="govuk-heading-m">£2746.00 <span class="govuk-caption-m" style="color: #000;"> As of<span id="balanceYesterday"></span></span>
                     </h3>


                   <!-- <span class="govuk-caption-m">Outstanding balance</span>
                   <h3 class="govuk-heading-m">£17,254.00<span class="govuk-caption-m" style="color: #000; padding-bottom: 10px;"> Next payment due <br> <span id="nextPaymentDue"></span></span>
                     <a href="make-payment" role="button" class="govuk-button">
                     Make a payment
                   </a>

                   </h3> -->




                <!-- <ul class="govuk-list govuk-link--no-visited-state">
                <li>

                  <a class="govuk-link--no-visited-state govuk-!-font-size-19 govuk-!-font-weight-bold" href="/statements">View statements</a>
                </li>
                <li>
                  <a class="govuk-link govuk-link--no-visited-state govuk-!-font-size-19 govuk-!-font-weight-bold" href="/manage-account">Manage account</a>
                </li>
                <li>
                  <a class="govuk-link govuk-link--no-visited-state govuk-!-font-size-19 govuk-!-font-weight-bold" href="#">Add an account</a>
                </li>
              </ul> -->

              <br>

        </div>

        <div class="govuk-grid-column-three-quarters">

          <h2 class="govuk-heading-l">Transactions</h2>

          <div class="govuk-grid-row">

            <!-- <div class="govuk-grid-column-one-third">
              <div class="govuk-form-group">
                <label class="govuk-label" for="email">
                  Date range
                </label>
              <div class="govuk-input" id="reportrange" style="background: #fff; font-size: 18px; cursor: pointer; padding: 8px 10px; border: 2px solid #000; width: 100%">
                <i class="hod-calendar"></i>&nbsp;
                <span></span>
                 <i class="fa fa-caret-down"></i>
            </div>
            </div>
            </div> -->



            <!-- <div class="govuk-grid-column-two-thirds">
              <form class="govuk-form-group">
                <label class="govuk-label" for="email">
                  Search
                </label>

                  <div style="float: left; margin-right: 1%; width: 80%;">
                    <input type="text" class="govuk-input" id="myInput" placeholder="Enter a case number or reference" style="width: 100%;">
                  </div>
                  <div style="float: left; width: 19%;">
                    <button type="button" class="govuk-button" onclick="myFunction()" style="margin: 0; width: 100%;">Search</button>
                  </div>

              </form>
            </div> -->




            </div>


              <div class="govuk-grid-row">
                <div class="govuk-grid-column-full">

            <!-- <a class="govuk-link govuk-link--no-visited-state govuk-!-font-weight-bold" href="#">Download current transactions</a> -->




          <table class="govuk-body govuk-!-font-size-14" id="transactionstable">
          <p class="govuk-body govuk-!-font-size-16">  <!-- 7 payments --> </p>
          <thead class="govuk-!-font-size-16">
      <tr class="govuk-table__row">
        <th class="govuk-table__header" scope="col">Payment reference</th>
        <th class="govuk-table__header" scope="col">Case</th>
        <!-- <th class="govuk-table__header" scope="col">Reference</th> -->
        <th class="govuk-table__header" scope="col">Status</th>
        <th class="govuk-table__header" scope="col">Date created</th>
        <th class="govuk-table__header" scope="col">Amount</th>

      </tr>
    </thead>
    <tbody>
      <tr>
        <td data-label="Payment reference"><a href="#">RC-2352-6362-6257-7742<a/></td>
        <td data-label="Case">1542-5226-7383-2772</td>
        <!-- <td data-label="Your reference">J Hart vs M Hart</td> -->
        <td data-label="Status">Pending</td>
        <td id="pendingPayment" data-label="Date"></td>
        <td data-label="Amount">-£550.00</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="#">RC-9584-2521-7742-1457<a/></td>
        <td data-label="Case">1526-8943-7271-8327</td>
        <!-- <td data-label="Your reference">Smith probate app</td> -->
        <td data-label="Status">Completed</td>
        <td id="1457Date" data-label="Date"></td>
        <td data-label="Amount">-£215.00</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="#">RC-6124-1415-7215-1515<a/></td>
        <td data-label="Case">1562-1578-3622-1589</td>
        <!-- <td data-label="Your reference">Jones hearing</td> -->
        <td data-label="Status">Completed</td>
        <td id="1515Date" data-label="Date"></td>
        <td data-label="Amount">-£250.00</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="#">RC-6420-7212-7321-8721<a/></td>
        <td data-label="Case">1538-3893-8483-8337</td>
        <!-- <td data-label="Your reference">Baker PRB </td> -->
        <td data-label="Status">Completed</td>
        <td id="8721Date" data-label="Date"></td>
        <td data-label="Amount">-£215.00</td>
      </tr>





    </tbody>
  </table>



      </div>
        </div>

        </div>

      </div>























    </main>
  </div>



{% endblock %}
{% block page_scripts %}

<script>

$(function() {
  $('input[name="birthday"]').daterangepicker({
    singleDatePicker: true,
    showDropdowns: true,
    minYear: 1901,
    maxYear: parseInt(moment().format('YYYY'),10)
  }, function(start, end, label) {
    var years = moment().diff(start, 'years');
    // alert("You are " + years + " years old!");
  });

});

$(function() {

    var start = moment().subtract(29, 'days');
    var end = moment();

    function cb(start, end) {
        $('#reportrange span').html(start.format('DD MMM YYYY') + ' - ' + end.format('DD MMM YYYY'));
    }

    $('#reportrange').daterangepicker({
        startDate: start,
        endDate: end,
        ranges: {
          'Next 7 Days': [moment().add(6, 'days'), moment().add(1, 'days')],
          'Tomorrow': [moment().add(1, 'days'), moment().add(1, 'days')],
           'Today': [moment(), moment()],
           'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
           'Last 7 Days': [moment().subtract(6, 'days'), moment()],
           'Last 30 Days': [moment().subtract(29, 'days'), moment()],
           'This Month': [moment().startOf('month'), moment().endOf('month')],
           'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
        }
    }, cb);

    cb(start, end);

});

function myFunction() {
  // Declare variables
  var input, filter, table, tr, td, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("transactionstable");
  tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[1];
    if (td) {
      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
}

  balanceYesterday();

  function balanceYesterday() {
    var dateField = document.getElementById('balanceYesterday');
    dateField.innerHTML = moment().subtract(1, 'days').format ('[ ]DD MMM YYYY');
  }

  paymentReferenceDates();

  function paymentReferenceDates() {
    var dateField = document.getElementById('pendingPayment');
    dateField.innerHTML = moment().format('DD MMM YYYY[—23:00:00]');

    var dateField = document.getElementById('1457Date');
    dateField.innerHTML = moment().subtract(1, 'days').format ('DD MMM YYYY[—12:31:27]');

    var dateField = document.getElementById('1515Date');
    dateField.innerHTML = moment().subtract(2, 'days').format ('DD MMM YYYY[—09:11:12]');

    var dateField = document.getElementById('8721Date');
    dateField.innerHTML = moment().subtract(3, 'days').format ('DD MMM YYYY[—16:01:45]');

    var dateField = document.getElementById('directDebitDate');
    dateField.innerHTML = moment().subtract(3, 'days').format ('DD MMM YYYY[—00:00:02]');

    var dateField = document.getElementById('1678Date');
    dateField.innerHTML = moment().subtract(4, 'days').format ('DD MMM YYYY[—11:43:33]');

    var dateField = document.getElementById('7832Date');
    dateField.innerHTML = moment().subtract(4, 'days').format ('DD MMM YYYY[—15:23:56]');

    var dateField = document.getElementById('8363Date');
    dateField.innerHTML = moment().subtract(5, 'days').format ('DD MMM YYYY[—10:20:05]');
  }

  nextPaymentDue();

  function nextPaymentDue() {
    var dateField = document.getElementById('nextPaymentDue');
    dateField.innerHTML = moment().add(1, 'months').format ('01 MMM YYYY');
  }



</script>


{% endblock %}
